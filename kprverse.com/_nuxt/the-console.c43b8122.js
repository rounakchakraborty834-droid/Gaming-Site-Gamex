import o from"./the-console-loading.732ca490.js";import e from"./btn-close.9ef70656.js";import l from"./hacky-text.0a0f4d07.js";import a from"./console-window.2a6c9f87.js";import{f as s,e as n,b as t,$ as r,r as i,am as c,h as u,E as d,aF as m,Z as p,N as f,aA as v,o as h,c as g,w,z as y,m as C,u as k,q as b,A as _,v as j,t as x,l as S,F as I,p as T,aG as $,aH as E,aI as L,G as z,M,T as H,aD as B,B as q,C as A}from"./entry.3ad1dc26.js";import{u as F}from"./useStory.fea059b1.js";import{C as G,_ as K}from"./console-bg.59ee79d6.js";import{I as P}from"./console.807291a3.js";import"./hover-sfx.2388e41a.js";import"./close-stroke.23b5663a.js";import"./useScrollTrigger.a08670f0.js";import"./render-rich-text.9eb1c32d.js";const R=o=>(q("data-v-a56081c9"),o=o(),A(),o),U={class:"panel"},X={class:"terminal"},D={class:"bar"},J={class:"left"},N={class:"protocol"},O=R((()=>C("br",null,null,-1))),V={class:"right"},Y=R((()=>C("div",{class:"title"},[C("img",{class:"icon",src:K}),C("span",null,"Keep Mainnet")],-1))),Z={class:"center"},Q=["onSubmit"],W={class:"left"},oo={class:"icon"},eo={class:"input relative",flex:"1"},lo={class:"visual full flex-row",justify:"start"},ao={key:0,class:"typed"},so={key:1,class:"placeholder"},no={class:"spacer"},to=s({__name:"the-console",props:{},emits:[],async setup(s,{emit:q}){let A,K;const{app:R,browser:to,storyblok:ro,debug:io}=n(),{$gsap:co}=t(),uo=r(),mo=i(!1),{data:po}=([A,K]=c((()=>F(`${ro.lang}/global/the-console`))),A=await A,K(),A),fo=u((()=>po.value.content)),vo=i(-1);function ho(o=1){return B(0,o).toString().padStart(o.toString().length,"0")}const go=u((()=>`${function(o=1){const e="abcdefghijklmnopqrstuvwxyz";let l="";for(let a=0;a<o;a++)l+=e[Math.floor(26*Math.random())];return l}(2)}${ho(99)}-${ho(99999999)}`)),wo=i([]),yo=function(o){wo.value=[...wo.value,o]};d((()=>R.showConsole),(()=>{R.showConsole?vo.value=0:(mo.value=!1,vo.value=-1,wo.value=[],_o.value=null,jo.show=!1,jo.command=null)}));const Co=i(null),{focused:ko}=m(Co);d((()=>[R.showConsole,mo.value]),(()=>{R.showConsole&&mo.value&&bo()}),{immediate:!0});const bo=async function(){var o;await p(),null==(o=Co.value)||o.focus()},_o=i(null),jo=f({show:!1,command:null}),xo=i(null),So=[{id:"open-citizen-page",internal:!0,input:"connect_citizens"}],Io=function(){xo.value&&xo.value.scrollTo(0,xo.value.scrollHeight)};d(_o,Io),d(wo,(async()=>{await p(),Io()}));const To=function(){let o=_o.value;if(_o.value=null,!o)return;let e=function(o){var e,l;const a=So.find((e=>e.input.toLowerCase()==o.toLowerCase()));return a||(null==(l=null==(e=fo.value)?void 0:e.commands)?void 0:l.find((e=>e.input.toLowerCase()==o.toLowerCase())))}(o);e?e.internal?(o=>{"open-citizen-page"===o.id&&(uo.push("/registration"),R.toggleConsole(!1))})(e):(yo(`\n\n${e.output}`),jo.command=e,to.isMobile&&(jo.show=!0)):yo(`\n\n/The Command "${o} does not exist.\nPlease try again.\n`)},$o=function(){jo.command&&(jo.show=!0)},Eo=function(){jo.show=!1,jo.command=null};v("`",(()=>{R.toggleConsole()})),v("Escape",(()=>{if(jo.show)return jo.show=!1,void(jo.command=null);R.toggleConsole(!1)}));const Lo=i(null),zo=i(null),Mo=i(null),Ho=i(null),Bo=function(o,e){let l=new co.timeline({onComplete:e});l.set(Lo.value,{opacity:1}),l.add("start"),l.fromTo(zo.value,{opacity:0},{opacity:1,duration:.1},"start"),l.fromTo(Mo.value,{scaleX:0},{scaleX:1,ease:"power2.inOut",duration:.3},"start"),l.fromTo(Ho.value,{opacity:0},{opacity:1,ease:"rough({strength: 4, points: 50, clamp: true, template: power2.out})",duration:.3},"start+=0.2")},qo=function(o,e){let l=new co.timeline({onComplete:e});l.add("start"),l.to(Lo.value,{opacity:0,duration:.1},"start")};return(s,n)=>{const t=o,r=e,i=l,c=a;return h(),g(H,{onEnter:Bo,onLeave:qo,appear:""},{default:w((()=>[y(C("div",{class:"the-console full fixed",ref_key:"refRoot",ref:Lo},[C("div",{class:"underlay full",ref_key:"refUnderlay",ref:zo,onClick:n[0]||(n[0]=o=>k(R).toggleConsole(!1))},null,512),C("div",U,[C("div",{class:"bg full",ref_key:"refBg",ref:Mo},[b(k(G),{class:"full"})],512),C("div",{class:"content",ref_key:"refContent",ref:Ho},[k(R).showConsole&&!k(mo)?(h(),g(t,{key:0,protocolId:k(go),onLoaded:n[1]||(n[1]=o=>mo.value=!0)},null,8,["protocolId"])):_("",!0),y(C("div",X,[C("div",D,[C("div",J,[C("div",N,[j("Encrypted Protocol"),O,j(x(k(go)),1)])]),C("div",V,[Y,b(r,{onClick:n[2]||(n[2]=o=>k(R).toggleConsole(!1))})])]),C("div",Z,[C("div",{class:"scroll",ref_key:"refScroll",ref:xo},[C("pre",null,[k(R).showConsole&&k(mo)?(h(),g(i,{key:0,class:"line",externalHovering:!1,animationSpeed:.2},{default:w((()=>{var o;return[j(x(null==(o=k(fo))?void 0:o.intro),1)]})),_:1})):_("",!0),(h(!0),S(I,null,T(k(wo),(o=>(h(),g(i,{class:"line",externalHovering:!1,animationSpeed:.2,onEntered:$o},{default:w((()=>[j(x(o),1)])),_:2},1024)))),256))])],512)]),C("form",{class:"command",onSubmit:$(To,["prevent"])},[C("div",W,[C("div",oo,[b(k(P),{class:"icon-console"})]),C("div",eo,[y(C("input",{class:"full",ref_key:"refInput",ref:Co,type:"text","onUpdate:modelValue":n[3]||(n[3]=o=>E(_o)?_o.value=o:null),autofocus:"",placeholder:"type your command",onBlur:bo},null,544),[[L,k(_o)]]),C("div",lo,[k(_o)?(h(),S("div",ao,x(k(_o)),1)):_("",!0),C("div",{class:z(["caret",{hidden:!k(ko)}])},null,2),k(_o)?_("",!0):(h(),S("div",so,"Type Your Command"))])])])],40,Q)],512),[[M,k(mo)]])],512)]),C("div",no,[b(c,{show:k(jo).show,command:k(jo).command,protocolId:k(go),onClose:Eo},null,8,["show","command","protocolId"])])],512),[[M,k(R).showConsole]])])),_:1})}}},[["__scopeId","data-v-a56081c9"]]);export{to as default};
