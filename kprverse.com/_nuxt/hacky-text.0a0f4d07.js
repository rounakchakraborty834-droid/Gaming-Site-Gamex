import{f as e,e as t,b as a,r as n,j as l,K as r,h as o,E as i,o as s,l as u,m as f,s as c,t as d,u as p}from"./entry.3ad1dc26.js";import{u as v}from"./useScrollTrigger.a08670f0.js";const g=e({__name:"hacky-text",props:{characters:{default:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"},autoAppear:{default:1},appearOnce:{default:!1},delay:{default:0},externalHovering:{},animationSpeed:{default:1},writeInOnHover:{default:!1}},emits:["loaded","entered"],setup(e,{expose:g,emit:m}){const h=e,{app:x,browser:y}=t(),{$gsap:b,$SplitText:M,$ScrollTrigger:T}=a(),S=n(null),k=n(null),H=n(null);n([]);const O=n(),_=n(0);let j="",w=[],I=0,A=0,R=!1,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";const K={inLine:0,at:0,glitch:0,lines:[]},$=function(){if(!y.isMobile){j=H.value.innerText,w=j.split("\n");for(let e of w)I+=e.length;O.value=""}};l($);const C=function(){if(y.isMobile)return;let e=Math.floor(K.at);for(let a in w){const t=w[a];K.lines[a]=t.substring(0,e),e-=t.length}let t=Math.floor(K.glitch);for(let a in K.lines){let e=K.lines[a];const n=t-e.length,l=Math.max(0,-n);e=e.substring(0,e.length-l);for(let t=0;t<l-1;t++){const t=Math.floor(52*Math.random()-1);e+=E.substring(t,t+1)}K.lines[a]=e}O.value=K.lines.join("\n")},L=function(){R=!1,m("entered")},U=function(e=1,t=0){y.isMobile||b.fromTo(K,{glitch:0},{glitch:I,onUpdate:C,onComplete:L,ease:"linear",delay:t+h.delay,duration:(.04*I+.4)*h.animationSpeed*e})},q=function(e=1,t=0){y.isMobile||(O.value="",b.fromTo(K,{at:0},{at:I,ease:"linear",duration:.04*I*h.animationSpeed*e,delay:t+h.delay}))},z=function(){const e=performance.now()/1e3;e-A<0||R||(A=e,U(1),h.writeInOnHover&&q(1,0))};v((()=>{if(h.autoAppear)return T.create({trigger:H.value,start:"center bottom",onEnter:()=>{h.appearOnce&&_.value>0||(q(),U(),_.value++)}})}));const B=r(S),D=o((()=>null!=h.externalHovering?h.externalHovering:B.value));return i((()=>D.value),(()=>{D.value&&z()})),g({handleRollOver:z,animateIn:function(e=0,t=1){q(t,e),U(t,e)},reset:()=>{$(),q(),U()},clearText:()=>{k.value.innerText=""},refRoot:S}),(e,t)=>(s(),u("div",{class:"hacky-text relative",ref_key:"refRoot",ref:S},[f("div",{class:"spacer",ref_key:"refSpacer",ref:H},[c(e.$slots,"default",{},void 0,!0)],512),f("div",{class:"animation",ref_key:"refAnimation",ref:k},d(p(O)),513)],512))}},[["__scopeId","data-v-a07065fc"]]);export{g as default};
